!function(e){"use strict";function t(){var e;return e={exceptions:{classNotFound:function(t){throw e.__deconstruct(),"fatal exception: No associated class found for key: '"+t+"'."},traversalFault:function(t){throw e.__deconstruct(),"fatal exception: This function is not available when running in "+t+" mode! See the documentation for details."},notImplemented:function(t){throw e.__deconstruct(),"fatal exception: "+t+" not implemented yet but will be soon!"}},defaultCallbackPosition:"postWalk",configDefaults:{log:!1,classMap:{},logger:console,traversalMode:"integrated",enforceRootClass:!1,strictClasses:!1,rootObjectCallbacks:!0,runCallbacks:!0,monitorPerformance:!1,pathFormat:function(e,t){return t?"["+e+"]":'["'+e+'"]'},callbacks:[]},__data:{reports:[]},__callbackPrioritySort:function(e,t){var n=e.priority,r=t.priority;return r>n?1:n>r?-1:0},__partial:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.concat(Array.prototype.slice.call(arguments));return e.apply(this,n)}},__nodeFunctions:{parent:function(t){return e.__runtime.uuidMap[t]},siblings:function(t){return"integrated"===e.__runtime.config.traversalMode&&e.exceptions.traversalFault("integrated"),e.__runtime.uuidMap[t]}},__set_uuid:function(t,n,r,a,o,i,s,_){var c=++e.__runtime.uuid,l={_meta:{uuid:c,parentUuid:t},key:n,val:r,type:typeof r,className:a,isRoot:i,path:s,container:_,executedCallbacks:[],parent:e.__partial(e.__nodeFunctions.parent,t)};return e.__runtime.uuidMap[c]=l,c},__matchedCallbacks:function(t,n){var r=e.__runtime.uuidMap[t],a=e.__runtime.config.runCallbacks,o=[];if(a){if(r.isRoot&&!e.__runtime.config.rootObjectCallbacks)return o;var i=e.__runtime.positionCallbacks[n];if("undefined"==typeof i)return[];for(var s=0;s<i.length;++s){var _=i[s];if(!("undefined"!=typeof _.containers&&-1===_.containers.indexOf(r.container)||"undefined"!=typeof _.classNames&&-1===_.classNames.indexOf(r.className))){var c="undefined"!=typeof _.keys,l="undefined"!=typeof _.classKeys;if(c||l){if("undefined"==typeof r.key)continue;if(c){if(-1===_.keys.indexOf(r.key))continue}else if("undefined"==typeof r.parent().className||"undefined"==typeof _.classKeys[r.parent().className]||-1===_.classKeys[r.parent().className].indexOf(r.key))continue}o.push(_)}}}return o},__execCallbacks:function(t,n){for(var r=0;r<t.length;++r)t[r].__walk$_has_run=!1;for(var r=0;r<t.length;++r){if(e.__runtime.config.monitorPerformance){var a=new Date;t[r].callback(e.__runtime.uuidMap[n]),e.__data.reports[e.__runtime.reportId].callbackProcessingTime+=new Date-a}else t[r].callback(e.__runtime.uuidMap[n]);t[r].__walk$_has_run=!0,e.__runtime.uuidMap[n].executedCallbacks.push(t[r])}for(var r=0;r<t.length;++r)delete t[r].__walk$_has_run},__log:function(t,n){1==e.__runtime.config.log&&("undefined"==typeof n&&(n=1),1===n?e.__runtime.config.logger.log.apply(console,t):2===n?"undefined"!=typeof console.group&&e.__runtime.config.logger.group.apply(console,t):3===n&&"undefined"!=typeof console.groupEnd&&e.__runtime.config.logger.groupEnd.apply(console,t))},__integratedTraverse:function(t,n,r,a,o,i){var s,_=t,c=n;"undefined"==typeof a&&(a=!1),"undefined"==typeof o&&(o="");var l=!("undefined"==typeof c||null==c);if(s=l&&c.constructor==Array?"array":l&&c.constructor==Object?"object":"value","undefined"==typeof r){var u=e.__runtime.config.classMap,d=!u||!e.__runtime.config.classMap[_],f=!a||a&&e.__runtime.config.enforceRootClass;e.__runtime.config.strictClasses&&d&&f&&"object"==s?walk.exceptions.classNotFound(_):d||(r=e.__runtime.config.classMap[_])}e.__runtime.config.monitorPerformance&&(e.__data.reports[e.__runtime.reportId].processed[s]+=1,"undefined"!=typeof r&&"array"!=s&&("undefined"==typeof e.__data.reports[e.__runtime.reportId].processed.classInstances[r]?e.__data.reports[e.__runtime.reportId].processed.classInstances[r]=1:e.__data.reports[e.__runtime.reportId].processed.classInstances[r]+=1));var p=e.__set_uuid(i,_,c,r,parent,a,o,s),m=e.__matchedCallbacks(p,"preWalk");e.__execCallbacks(m,p);var g=_?_+" -->":"";if("array"==s){e.__log([g,"Array  ( Class:",r,")","Path:",o,"Root:",a],2);for(var k=0;k<c.length;++k)e.__integratedTraverse(void 0,c[k],r,!1,o+e.__runtime.config.pathFormat(k,!0),p);e.__log(void 0,3)}else if("object"==s){e.__log([g,"Object ( Class:",r,")","Path:",o,"Root:",a],2);for(var b in c)c.hasOwnProperty(b)&&e.__integratedTraverse(b,c[b],void 0,!1,o+e.__runtime.config.pathFormat(b,!1),p);e.__log(void 0,3)}else e.__log([g,c," ( Class:",r,")","Path:",o,"Root:",a],1);var v=e.__matchedCallbacks(p,"postWalk");e.__execCallbacks(v,p)},__initializeWalk:function(t){e.__runtime={},e.__runtime.config={},e.__runtime.uuidMap={},e.__runtime.uuid=0,Object.assign(e.__runtime.config,e.configDefaults),Object.assign(e.__runtime.config,t),"integrated"!==e.__runtime.config.traversalMode&&e.exceptions.notImplemented("Traversal modes other than 'integrated' are"),e.__runtime.positionCallbacks={};for(var n=0;n<e.__runtime.config.callbacks.length;++n){"undefined"==typeof e.__runtime.config.callbacks[n].priority&&(e.__runtime.config.callbacks[n].priority=0),("undefined"==typeof e.__runtime.config.callbacks[n].positions||e.__runtime.config.callbacks[n].positions.length<1)&&(e.__runtime.config.callbacks[n].positions=[e.defaultCallbackPosition]);for(var r=0;r<e.__runtime.config.callbacks[n].positions.length;++r){var a=e.__runtime.config.callbacks[n].positions[r];"undefined"==typeof e.__runtime.positionCallbacks[a]&&(e.__runtime.positionCallbacks[a]=[]),e.__runtime.positionCallbacks[a].push(e.__runtime.config.callbacks[n])}}for(var o in e.__runtime.positionCallbacks)e.__runtime.positionCallbacks[o]=e.__runtime.positionCallbacks[o].sort(e.__callbackPrioritySort)},__initializeReport:function(){var t=e.__data.reports.length;return e.__data.reports.push({}),e.__data.reports[t].id=t,e.__data.reports[t].startTime=new Date,e.__data.reports[t].callbackProcessingTime=0,e.__data.reports[t].processed={},e.__data.reports[t].processed.array=0,e.__data.reports[t].processed.object=0,e.__data.reports[t].processed.value=0,e.__data.reports[t].processed.classInstances={},t},__deconstructReport:function(t){e.__data.reports[t]&&(e.__data.reports[t].endTime=new Date,e.__data.reports[t].executionTime=e.__data.reports[t].endTime-e.__data.reports[t].startTime)},__deconstruct:function(){e.__runtime.config.monitorPerformance&&e.__data.reports[e.__runtime.reportId]&&(e.__deconstructReport(e.__runtime.reportId),e.__runtime.config.logger.log("Finished execution. Performance report below."),e.__runtime.config.logger.log(e.__data.reports[e.__runtime.reportId])),delete e.__runtime},walk:function(t,n,r){if(e.__initializeWalk(r),e.__runtime.config.monitorPerformance){var a=e.__initializeReport();e.__runtime.reportId=a}var o=e.__set_uuid(void 0,void 0,t,n);e.__integratedTraverse(void 0,t,n,!0,void 0,o),e.__deconstruct()},flatten:function(t,n,r){var a=[];return e.walk(t,void 0,{callbacks:[{keys:[n],callback:function(e){a.push(e.val)}}]}),r?e.unique(a):a},unique:function(e){var t={};return e.filter(function(e){return t[e]?void 0:(t[e]=!0,e)})},deepCopy:function(t){function n(e,t,n){for(var r=n.split(a).slice(1);r.length>1;)e=e[r.shift()];e[r.shift()]=t}var r={},a="7f:&*_a6a";return e.walk(t,void 0,{pathFormat:function(e,t){return a+e},rootObjectCallbacks:!1,callbacks:[{positions:["preWalk"],callback:function(e){switch(e.container){case"array":n(r,[],e.path);break;case"object":n(r,{},e.path);break;case"value":n(r,e.val,e.path)}}}]}),r}}}"undefined"==typeof Walk?e.Walk=t():console.log("Error defining 'Walk': already defined.")}(this);