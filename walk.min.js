!function(e){"use strict";function t(){var e;return e={exceptions:{classNotFound:function(t){throw e.__deconstruct(),"fatal exception: No associated class found for key: '"+t+"'."},traversalFault:function(t){throw e.__deconstruct(),"fatal exception: This function is not available when running in "+t+" mode! See the documentation for details."},notImplemented:function(t){throw e.__deconstruct(),"fatal exception: "+t+" not implemented yet but will be soon!"}},defaultCallbackPosition:"postWalk",configDefaults:{log:!1,classMap:{},logger:console,traversalMode:"depth",enforceRootClass:!1,strictClasses:!1,rootObjectCallbacks:!0,runCallbacks:!0,monitorPerformance:!1,pathFormat:function(e,t){return t?"["+e+"]":'["'+e+'"]'},callbacks:[]},__data:{reports:[]},__callbackPrioritySort:function(e,t){var n=e.priority,r=t.priority;return r>n?1:n>r?-1:0},__partial:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.concat(Array.prototype.slice.call(arguments));return e.apply(this,n)}},__nodeFunctions:{parent:function(t){return e.__runtime.uuidMap[t]},siblings:function(t){return"integrated"===e.__runtime.config.traversalMode&&e.exceptions.traversalFault("integrated"),e.__runtime.uuidMap[t]}},__set_uuid:function(t,n,r,a,o,i,_,s){var c=++e.__runtime.uuid,u={_meta:{uuid:c,parentUuid:t},key:n,val:r,type:typeof r,className:a,isRoot:i,path:_,container:s,executedCallbacks:[],parent:e.__partial(e.__nodeFunctions.parent,t)};return e.__runtime.uuidMap[c]=u,c},__matchedCallbacks:function(t,n){var r=e.__runtime.uuidMap[t],a=e.__runtime.config.runCallbacks,o=[];if(a){if(r.isRoot&&!e.__runtime.config.rootObjectCallbacks)return o;var i=e.__runtime.positionCallbacks[n];if("undefined"==typeof i)return[];for(var _=0;_<i.length;++_){var s=i[_];if(!("undefined"!=typeof s.containers&&-1===s.containers.indexOf(r.container)||"undefined"!=typeof s.classNames&&-1===s.classNames.indexOf(r.className))){var c="undefined"!=typeof s.keys,u="undefined"!=typeof s.classKeys;if(c||u){if("undefined"==typeof r.key)continue;if(c){if(-1===s.keys.indexOf(r.key))continue}else if("undefined"==typeof r.parent().className||"undefined"==typeof s.classKeys[r.parent().className]||-1===s.classKeys[r.parent().className].indexOf(r.key))continue}o.push(s)}}}return o},__execCallbacks:function(t,n){for(var r=0;r<t.length;++r)t[r].__walk$_has_run=!1;for(var r=0;r<t.length;++r){if(e.__runtime.config.monitorPerformance){var a=new Date;t[r].callback(e.__runtime.uuidMap[n]),e.__data.reports[e.__runtime.reportId].callbackProcessingTime+=new Date-a}else t[r].callback(e.__runtime.uuidMap[n]);t[r].__walk$_has_run=!0,e.__runtime.uuidMap[n].executedCallbacks.push(t[r])}for(var r=0;r<t.length;++r)delete t[r].__walk$_has_run},__log:function(t,n){1==e.__runtime.config.log&&("undefined"==typeof n&&(n=1),1===n?e.__runtime.config.logger.log.apply(console,t):2===n?"undefined"!=typeof console.group&&e.__runtime.config.logger.group.apply(console,t):3===n&&"undefined"!=typeof console.groupEnd&&e.__runtime.config.logger.groupEnd.apply(console,t))},__getContainerType:function(e){var t,n=!("undefined"==typeof e||null==e);return t=n&&e.constructor==Array?"array":n&&e.constructor==Object?"object":"value"},__getClassName:function(t,n,r,a){if("undefined"==typeof t){var o=e.__runtime.config.classMap,i=!o||!e.__runtime.config.classMap[n],_=!a||a&&e.__runtime.config.enforceRootClass;e.__runtime.config.strictClasses&&i&&_&&"object"==r?e.exceptions.classNotFound(n):i||(t=e.__runtime.config.classMap[n])}return e.__runtime.config.monitorPerformance&&(e.__data.reports[e.__runtime.reportId].processed[r]+=1,"undefined"!=typeof t&&"array"!=r&&("undefined"==typeof e.__data.reports[e.__runtime.reportId].processed.classInstances[t]?e.__data.reports[e.__runtime.reportId].processed.classInstances[t]=1:e.__data.reports[e.__runtime.reportId].processed.classInstances[t]+=1)),t},__breadthTraverse:function(t,n,r,a,o,i,_,s,c){var c,u=t,l=n;if("undefined"==typeof a&&(a=!1),"undefined"==typeof o&&(o=""),"undefined"==typeof _&&(_=!1),s){var d=e.__runtime.uuidMap[c];r=d.className,container=d.container}else container=e.__getContainerType(l),r=e.__getClassName(r,u,container,a),c=e.__set_uuid(i,u,l,r,parent,a,o,container);var f=e.__matchedCallbacks(c,"preWalk");e.__execCallbacks(f,c);var p=[];if(_)if("array"==container)for(var m=0;m<l.length;++m){var g=e.__breadthTraverse(void 0,l[m],r,!1,o+e.__runtime.config.pathFormat(m,!0),c,!1,!1,void 0);g&&p.push(g)}else if("object"==container)for(var v in l)if(l.hasOwnProperty(v)){var g=e.__breadthTraverse(v,l[v],void 0,!1,o+e.__runtime.config.pathFormat(v,!1),c,!1,!1,c);g&&p.push(g)}var k=e.__matchedCallbacks(c,"postWalk");e.__execCallbacks(k,c);for(var m=0;m<p.length;++m){var d=e.__runtime.uuidMap[c];e.__breadthTraverse(void 0,d.val[m],r,!1,o+e.__runtime.config.pathFormat(m,!0),void 0,!0,!0,d._meta.uuid)}return"array"==container||"object"==container?c:!1},__depthTraverse:function(t,n,r,a,o,i){var _=t,s=n;"undefined"==typeof a&&(a=!1),"undefined"==typeof o&&(o="");var c=e.__getContainerType(s);r=e.__getClassName(r,_,c,a);var u=e.__set_uuid(i,_,s,r,parent,a,o,c),l=e.__matchedCallbacks(u,"preWalk");if(e.__execCallbacks(l,u),"array"==c)for(var d=0;d<s.length;++d)e.__depthTraverse(void 0,s[d],r,!1,o+e.__runtime.config.pathFormat(d,!0),u);else if("object"==c)for(var f in s)s.hasOwnProperty(f)&&e.__depthTraverse(f,s[f],void 0,!1,o+e.__runtime.config.pathFormat(f,!1),u);var p=e.__matchedCallbacks(u,"postWalk");e.__execCallbacks(p,u)},__initializeWalk:function(t){e.__runtime={},e.__runtime.config={},e.__runtime.uuidMap={},e.__runtime.uuid=0,Object.assign(e.__runtime.config,e.configDefaults),Object.assign(e.__runtime.config,t),"depth"!==e.__runtime.config.traversalMode&&e.exceptions.notImplemented("Traversal modes other than 'depth' are"),e.__runtime.positionCallbacks={};for(var n=0;n<e.__runtime.config.callbacks.length;++n){"undefined"==typeof e.__runtime.config.callbacks[n].priority&&(e.__runtime.config.callbacks[n].priority=0),("undefined"==typeof e.__runtime.config.callbacks[n].positions||e.__runtime.config.callbacks[n].positions.length<1)&&(e.__runtime.config.callbacks[n].positions=[e.defaultCallbackPosition]);for(var r=0;r<e.__runtime.config.callbacks[n].positions.length;++r){var a=e.__runtime.config.callbacks[n].positions[r];"undefined"==typeof e.__runtime.positionCallbacks[a]&&(e.__runtime.positionCallbacks[a]=[]),e.__runtime.positionCallbacks[a].push(e.__runtime.config.callbacks[n])}}for(var o in e.__runtime.positionCallbacks)e.__runtime.positionCallbacks[o]=e.__runtime.positionCallbacks[o].sort(e.__callbackPrioritySort)},__initializeReport:function(){var t=e.__data.reports.length;return e.__data.reports.push({}),e.__data.reports[t].id=t,e.__data.reports[t].startTime=new Date,e.__data.reports[t].callbackProcessingTime=0,e.__data.reports[t].processed={},e.__data.reports[t].processed.array=0,e.__data.reports[t].processed.object=0,e.__data.reports[t].processed.value=0,e.__data.reports[t].processed.classInstances={},t},__deconstructReport:function(t){e.__data.reports[t]&&(e.__data.reports[t].endTime=new Date,e.__data.reports[t].executionTime=e.__data.reports[t].endTime-e.__data.reports[t].startTime)},__deconstruct:function(){e.__runtime.config.monitorPerformance&&e.__data.reports[e.__runtime.reportId]&&(e.__deconstructReport(e.__runtime.reportId),e.__runtime.config.logger.log("Finished execution. Performance report below."),e.__runtime.config.logger.log(e.__data.reports[e.__runtime.reportId])),delete e.__runtime},walk:function(t,n,r){if(e.__initializeWalk(r),e.__runtime.config.monitorPerformance){var a=e.__initializeReport();e.__runtime.reportId=a}var o=e.__set_uuid(void 0,void 0,t,n);e.__depthTraverse(void 0,t,n,!0,void 0,o),e.__deconstruct()},flatten:function(t,n,r){var a=[];return e.walk(t,void 0,{callbacks:[{keys:[n],callback:function(e){a.push(e.val)}}]}),r?e.unique(a):a},unique:function(e){var t={};return e.filter(function(e){return t[e]?void 0:(t[e]=!0,e)})},deepCopy:function(t){function n(e,t,n){for(var r=n.split(a).slice(1);r.length>1;)e=e[r.shift()];e[r.shift()]=t}var r={},a="7f:&*_a6a";return e.walk(t,void 0,{pathFormat:function(e,t){return a+e},rootObjectCallbacks:!1,callbacks:[{positions:["preWalk"],callback:function(e){switch(e.container){case"array":n(r,[],e.path);break;case"object":n(r,{},e.path);break;case"value":n(r,e.val,e.path)}}}]}),r}}}"undefined"==typeof Walk?e.Walk=t():console.log("Error defining 'Walk': already defined.")}(this);