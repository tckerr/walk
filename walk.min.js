!function(e){"use strict";function o(){var e;return e={exceptions:{classNotFound:function(e){throw"Exception thrown during object traversal. No associated class found for key: '"+e+"'."}},defaultCallbackPosition:"postWalk",configDefaults:{log:!1,classMap:{},logger:console,enforceRootClass:!1,strictClasses:!1,rootObjectCallbacks:!0,runCallbacks:!0,monitorPerformance:!1,pathFormat:function(e,o){return o?"["+e+"]":'["'+e+'"]'},callbacks:[]},walk:function(o,a,n){var r=this;return r.config=r.configDefaults,Object.assign(r.config,n),r.config.monitorPerformance&&(r.__walk_performanceReport={},r.__walk_performanceReport.startTime=new Date,r.__walk_performanceReport.callbackProcessingTime=0,r.__walk_performanceReport.processed={},r.__walk_performanceReport.processed.array=0,r.__walk_performanceReport.processed.object=0,r.__walk_performanceReport.processed.value=0,r.__walk_performanceReport.processed.classInstances={}),r.execute=function(){r.traverse(void 0,o,void 0,void 0,void 0,a,void 0,!0),r.config.monitorPerformance&&(r.__walk_performanceReport.endTime=new Date,r.__walk_performanceReport.executionTime=r.__walk_performanceReport.endTime-r.__walk_performanceReport.startTime,r.config.logger.log("Finished execution. Performance report below."),r.config.logger.log(r.__walk_performanceReport))},r.log=function(e,o){1==r.config.log&&("undefined"==typeof o&&(o=1),1===o?r.config.logger.log.apply(console,e):2===o?"undefined"!=typeof console.group&&r.config.logger.group.apply(console,e):3===o&&"undefined"!=typeof console.groupEnd&&r.config.logger.groupEnd.apply(console,e))},r.execCallbacks=function(e,o,a,n,t,c,s,l,i,f,p,u){for(var d={callbacks:e,key:o,val:a,container:p,className:n,owner:t,arrayAssignment:c,arrayAssignmentKey:s,isRoot:l,path:i,previousCallbacks:f,parentClassName:u},_=0;_<e.length;++_)e[_].__walk_has_run=!1;for(var _=0;_<e.length;++_){if(r.config.monitorPerformance){var g=new Date;e[_].callback(d),r.__walk_performanceReport.callbackProcessingTime+=new Date-g}else e[_].callback(d);e[_].__walk_has_run=!0}for(var _=0;_<e.length;++_)delete e[_].__walk_has_run},r.matchedCallbacks=function(o,a,n,t,c,s){var l=r.config.runCallbacks,i=[];if(l){if(s&&!r.config.rootObjectCallbacks)return i;for(var f=r.config.callbacks,p=0;p<f.length;++p){var u=f[p];if("undefined"!=typeof u.positions){if(-1===u.positions.indexOf(t))continue}else if(t!==e.defaultCallbackPosition)continue;if(!("undefined"!=typeof u.containers&&-1===u.containers.indexOf(o)||"undefined"!=typeof u.classNames&&-1===u.classNames.indexOf(a))){var d="undefined"!=typeof u.keys,_="undefined"!=typeof u.classKeys;if(d||_){if("undefined"==typeof n)continue;if(d){if(-1===u.keys.indexOf(n))continue}else if("undefined"==typeof c||"undefined"==typeof u.classKeys[c]||-1===u.classKeys[c].indexOf(n))continue}i.push(u)}}}return i},r.traverse=function(o,a,t,c,s,l,i,f,p){var u,d=o,_=a,g=i;"undefined"==typeof f&&(f=!1),"undefined"==typeof p&&(p="");var k=!("undefined"==typeof _||null==_);if(u=k&&_.constructor==Array?"array":k&&_.constructor==Object?"object":"value","undefined"==typeof l){var m=n.classMap,v=!m||!r.config.classMap[d],y=!f||f&&r.config.enforceRootClass;r.config.strictClasses&&v&&y&&"object"==u?e.exceptions.classNotFound(d):v||(l=n.classMap[d])}r.config.monitorPerformance&&(r.__walk_performanceReport.processed[u]+=1,"undefined"!=typeof l&&"array"!=u&&("undefined"==typeof r.__walk_performanceReport.processed.classInstances[l]?r.__walk_performanceReport.processed.classInstances[l]=1:r.__walk_performanceReport.processed.classInstances[l]+=1));var b=r.matchedCallbacks(u,l,d,"preWalk",g,f);r.execCallbacks(b,d,_,l,t,c,s,f,p,[],u,g);var w=d?d+" -->":"";if("array"==u){r.log([w,"Array  ( Class:",l,")","Path:",p,"Root:",f],2);for(var h=0;h<_.length;++h)r.traverse(void 0,_[h],t,_,d,l,l,!1,p+r.config.pathFormat(h,!0));r.log(void 0,3)}else if("object"==u){r.log([w,"Object ( Class:",l,")","Path:",p,"Root:",f],2);for(var R in _)_.hasOwnProperty(R)&&r.traverse(R,_[R],_,void 0,void 0,void 0,l,!1,p+r.config.pathFormat(R,!1));r.log(void 0,3)}else r.log([w,_," ( Class:",l,")","Path:",p,"Root:",f],1);var C=r.matchedCallbacks(u,l,d,"postWalk",g,f);r.execCallbacks(C,d,_,l,t,c,s,f,p,b,u,g)},this.execute()},flatten:function(o,a,n){var r=[];return e.walk(o,void 0,{callbacks:[{keys:[a],callback:function(e){r.push(e.val)}}]}),n?e.unique(r):r},unique:function(e){var o={};return e.filter(function(e){return o[e]?void 0:(o[e]=!0,e)})},deepCopy:function(o){function a(e,o,a){for(var n=a.split(r).slice(1);n.length>1;)e=e[n.shift()];e[n.shift()]=o}var n={},r="7f:&*_a6a";return e.walk(o,void 0,{pathFormat:function(e,o){return r+e},rootObjectCallbacks:!1,callbacks:[{positions:["preWalk"],callback:function(e){switch(e.container){case"array":a(n,[],e.path);break;case"object":a(n,{},e.path);break;case"value":a(n,e.val,e.path)}}}]}),n}}}"undefined"==typeof walk?e.walk=o():console.log("Error defining 'walk': already defined.")}(this);