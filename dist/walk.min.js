!function(e){"use strict";function t(){var e;return e={__exceptions:{classNotFound:function(e){throw"No associated class found for key: '"+e+"'."},traversalFault:function(e){throw"This function is not available when running in "+e+" mode! See the documentation for details."},notImplemented:function(e){throw e+" not implemented yet but will be soon!"},structureFault:function(){throw"The object violates the defined structure. Override 'dataStructure' in the config to allow parsing different object structures."},stopProcess:function(){throw"walk:stopProcess"},validationError:function(e){throw e}},"break":function(){e.__exceptions.stopProcess()},defaultCallbackPosition:"postWalk",configDefaults:{classMap:{},logger:console,traversalMode:"depth",enforceRootClass:!1,strictClasses:!1,rootObjectCallbacks:!0,runCallbacks:!0,monitorPerformance:!1,dataStructure:"finiteTree",pathFormat:function(e,t){return t?"["+e+"]":'["'+e+'"]'},callbacks:[]},__data:{reports:[]},__classes:{node:function(e,t,r,n,a,o,i,s,c,l){this._meta={children:[],parents:[]},this.uuid=e,this.key=t,this.val=r,this.type=n,this.className=a,this.isRoot=o,this.path=i,this.container=s,this.executedCallbacks=c,this.parent=l,this.parent&&this.parent._meta.children.push(this)}},__nodeFactory:function(t,r,n,a,o,i,s,c,l,_){return new e.__classes.node(t,r,n,a,o,i,s,c,l,_)},__callbackPrioritySort:function(e,t){var r=e.priority,n=t.priority;return n>r?1:r>n?-1:0},__partial:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.concat(Array.prototype.slice.call(arguments));return e.apply(this,r)}},__buildNode:function(t,r,n,a,o,i,s){var c=++e.__runtime.uuidCounter,l=e.__nodeFactory(c,t,r,typeof r,n,o,i,s,[],a);return l},__matchedCallbacks:function(t,r){var n=e.__runtime.config.runCallbacks,a=[];if(n){if(t.isRoot&&!e.__runtime.config.rootObjectCallbacks)return a;var o=e.__runtime.positionCallbacks[r];if("undefined"==typeof o)return[];for(var i=0;i<o.length;++i){var s=o[i];if(!("undefined"!=typeof s.containers&&-1===s.containers.indexOf(t.container)||"undefined"!=typeof s.classNames&&-1===s.classNames.indexOf(t.className))){var c="undefined"!=typeof s.keys,l="undefined"!=typeof s.classKeys;if(c||l){if("undefined"==typeof t.key)continue;if(c){if(-1===s.keys.indexOf(t.key))continue}else if("undefined"==typeof t.parent.className||"undefined"==typeof s.classKeys[t.parent.className]||-1===s.classKeys[t.parent.className].indexOf(t.key))continue}a.push(s)}}}return a},__execCallbacks:function(t,r){for(var n=0;n<t.length;++n)t[n].__walk$_has_run=!1;for(var a=0;a<t.length;++a){if(e.__runtime.config.monitorPerformance){var o=new Date;t[a].callback(r),e.__data.reports[e.__runtime.reportId].callbackProcessingTime+=new Date-o}else t[a].callback(r);t[a].__walk$_has_run=!0,r.executedCallbacks.push(t[a])}for(var i=0;i<t.length;++i)delete t[i].__walk$_has_run},__log:function(t,r){e.__runtime.config.log===!0&&("undefined"==typeof r&&(r=1),1===r?e.__runtime.config.logger.log.apply(console,t):2===r?"undefined"!=typeof console.group&&e.__runtime.config.logger.group.apply(console,t):3===r&&"undefined"!=typeof console.groupEnd&&e.__runtime.config.logger.groupEnd.apply(console,t))},__getContainerType:function(e){var t,r=!("undefined"==typeof e||null===e);return t=r&&e.constructor==Array?"array":r&&e.constructor==Object?"object":"value"},__getClassName:function(t,r,n,a){if("undefined"==typeof t){var o=e.__runtime.config.classMap,i=!o||!e.__runtime.config.classMap[r],s=!a||a&&e.__runtime.config.enforceRootClass;e.__runtime.config.strictClasses&&i&&s&&"object"==n?e.__exceptions.classNotFound(r):i||(t=e.__runtime.config.classMap[r])}return e.__runtime.config.monitorPerformance&&(e.__data.reports[e.__runtime.reportId].processed[n]+=1,"undefined"!=typeof t&&"array"!=n&&("undefined"==typeof e.__data.reports[e.__runtime.reportId].processed.classInstances[t]?e.__data.reports[e.__runtime.reportId].processed.classInstances[t]=1:e.__data.reports[e.__runtime.reportId].processed.classInstances[t]+=1)),t},__process:function(t,r,n){var a=t.key,o=t.val,i=t.className,s=t.isRoot,c=t.path,l=t.parent;"undefined"==typeof s&&(s=!1),"undefined"==typeof c&&(c="");var _=e.__getContainerType(o);if("object"!==_&&"array"!==_||e.__checkStructure(o)){i=e.__getClassName(i,a,_,s);var u=e.__buildNode(a,o,i,l,s,c,_),f=e.__matchedCallbacks(u,"preWalk");e.__execCallbacks(f,u);var p;if("array"===_)for(var d=0;d<o.length;++d)p={key:void 0,val:o[d],className:i,isRoot:!1,path:c+e.__runtime.config.pathFormat(d,!0),parent:u},"breadth"===r?n.push(p):"depth"===r&&e.__process(p,"depth");else if("object"===_)for(var h in o)o.hasOwnProperty(h)&&(p={key:h,val:o[h],className:void 0,isRoot:!1,path:c+e.__runtime.config.pathFormat(h,!1),parent:u},"breadth"===r?n.push(p):"depth"===r&&e.__process(p,"depth"));var m=e.__matchedCallbacks(u,"postWalk");e.__execCallbacks(m,u)}},__breadthTraverse:function(t){var r,n=[];for(e.__process(t,"breadth",n);n.length>0;)r=n.shift(),e.__process(r,"breadth",n)},__depthTraverse:function(t){e.__process(t,"depth")},__validateConfig:function(t){for(var r in t){var n=!1;for(var a in e.configDefaults)if(r===a){n=!0;break}n||e.__exceptions.validationError("'"+r+"' is not a valid configuration entry.")}},__initializeWalk:function(t){e.__runtime={},e.__runtime.config={},e.__runtime.nodes={},e.__runtime.uuidCounter=0,e.__runtime.seenObjects=[],Object.assign(e.__runtime.config,e.configDefaults),Object.assign(e.__runtime.config,t),e.__validateConfig(e.__runtime.config),"depth"!==e.__runtime.config.traversalMode&&"breadth"!==e.__runtime.config.traversalMode&&e.__exceptions.notImplemented("Traversal modes other than 'depth' and 'breadth' are"),e.__runtime.positionCallbacks={};for(var r=0;r<e.__runtime.config.callbacks.length;++r){"undefined"==typeof e.__runtime.config.callbacks[r].priority&&(e.__runtime.config.callbacks[r].priority=0),("undefined"==typeof e.__runtime.config.callbacks[r].positions||e.__runtime.config.callbacks[r].positions.length<1)&&(e.__runtime.config.callbacks[r].positions=[e.defaultCallbackPosition]);for(var n=0;n<e.__runtime.config.callbacks[r].positions.length;++n){var a=e.__runtime.config.callbacks[r].positions[n];"undefined"==typeof e.__runtime.positionCallbacks[a]&&(e.__runtime.positionCallbacks[a]=[]),e.__runtime.positionCallbacks[a].push(e.__runtime.config.callbacks[r])}}for(var o in e.__runtime.positionCallbacks)e.__runtime.positionCallbacks[o]=e.__runtime.positionCallbacks[o].sort(e.__callbackPrioritySort)},__initializeReport:function(){var t=e.__data.reports.length;return e.__data.reports.push({}),e.__data.reports[t].id=t,e.__data.reports[t].startTime=new Date,e.__data.reports[t].callbackProcessingTime=0,e.__data.reports[t].processed={},e.__data.reports[t].processed.array=0,e.__data.reports[t].processed.object=0,e.__data.reports[t].processed.value=0,e.__data.reports[t].processed.classInstances={},t},__deconstructReport:function(t){e.__data.reports[t]&&(e.__data.reports[t].endTime=new Date,e.__data.reports[t].executionTime=e.__data.reports[t].endTime-e.__data.reports[t].startTime)},__deconstruct:function(){e.__runtime.config.monitorPerformance&&e.__data.reports[e.__runtime.reportId]&&(e.__deconstructReport(e.__runtime.reportId),e.__runtime.config.logger.log("Finished execution. Performance report below."),e.__runtime.config.logger.log(e.__data.reports[e.__runtime.reportId])),delete e.__runtime},__checkStructure:function(t){var r=e.__runtime.config.dataStructure,n=!0;return-1!==e.__runtime.seenObjects.indexOf(t)?"finiteTree"===r?e.__exceptions.structureFault():"graph"===r&&(n=!1):e.__runtime.seenObjects.push(t),n},walk:function(t,r,n){try{if(e.__initializeWalk(n),e.__runtime.config.monitorPerformance){var a=e.__initializeReport();e.__runtime.reportId=a}var o={key:void 0,val:t,className:r,isRoot:!0,path:void 0,parent:void 0};"depth"===e.__runtime.config.traversalMode?e.__depthTraverse(o):"breadth"===e.__runtime.config.traversalMode&&e.__breadthTraverse(o)}catch(i){"walk:stopProcess"!==i&&("undefined"!=typeof console.error?console.error("Error during walk(): "+i):console.log("Error during walk(): "+i))}finally{return e.__deconstruct(),e.__runtime}},flatten:function(t,r,n){var a=[];return e.walk(t,void 0,{callbacks:[{keys:[r],callback:function(e){a.push(e.val)}}]}),n?e.unique(a):a},unique:function(e){var t={};return e.filter(function(e){return t[e]?void 0:(t[e]=!0,e)})},updateObjectViaPathString:function(e,t,r,n){for(var a=r.split(n).slice(1);a.length>1;)e=e[a.shift()];e[a.shift()]=t},deepCopy:function(t){var r={},n="7f:&*_a6a";return e.walk(t,void 0,{pathFormat:function(e,t){return n+e},rootObjectCallbacks:!1,callbacks:[{positions:["preWalk"],callback:function(t){switch(t.container){case"array":e.updateObjectViaPathString(r,[],t.path,n);break;case"object":e.updateObjectViaPathString(r,{},t.path,n);break;case"value":e.updateObjectViaPathString(r,t.val,t.path,n)}}}]}),r},apply:function(t,r){e.walk(t,void 0,{callbacks:[{callback:r}]})},find:function(t,r,n){"undefined"==typeof n&&(n=!1);var a=function(e,t){return e==t},o=function(e,t){return e===t},i=n?a:o,s=[];return e.apply(t,function(e){i(e.val,r)&&s.push(e.val)}),s},convert:function(t,r,n){var a;return e.walk(t,r,{rootObjectCallbacks:!0,callbacks:[{positions:["postWalk"],callback:function(e){if(e.isRoot)a=e,t=a;else if(e.key)e.parent.val[e.key]=e;else for(var r=0;r<e.parent.val.length;r++)e.parent.val[r]===e.val&&(e.parent.val[r]=e)}}]}),a},nodeMap:function(t,r,n){var a={};return e.walk(t,r,{rootObjectCallbacks:!0,callbacks:[{positions:["postWalk"],callback:function(e){a[e.uuid]=e}}]}),a}},e.__classes.node.prototype.siblings=function(){var e=this.parent;if(e){var t=[];if("array"===e.container)for(var r=e.val,n=0;n<r.length;n++)r[n]!==this&&t.push(r[n]);else for(var a in e.val)e.val.hasOwnProperty(a)&&e.val[a]!==this&&t.push(e.val[a]);return t}},e.__classes.node.prototype.parents=function(){for(var e=[],t=this.parent;t;)e.push(t),t=t.parent;return e},e.__classes.node.prototype.root=function(){for(var e,t=this.parent;t;)e=t,t=t.parent;return e},e.__classes.node.prototype.children=function(e){if("undefined"!=typeof e){for(var t=[],r=0;r<this._meta.children.length;++r){var n=!0;for(var a in e)if(this._meta.children[r][a]!==e[a]){n=!1;break}n&&t.push(this._meta.children[r])}return t}return this._meta.children},e}"undefined"==typeof Walk?e.Walk=t():console.log("Error defining 'Walk': already defined.")}(this);